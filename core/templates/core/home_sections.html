<!--core\templates\core\home_sections.html-->
{% load static %}

<!--
    Este es un fragmento de plantilla diseñado para el sitio web de la empresa de construcciones más grande de Argentina.
    Utiliza Tailwind CSS para el estilizado y Django para la lógica de contenido dinámico.

    Recomendaciones clave implementadas:
    1.  **Animaciones "animate-on-scroll" refactorizadas:** El estado inicial (oculto y desplazado) se define en CSS,
        y JavaScript solo añade una clase "is-visible" para activar la transición. Esto mejora la performance y la robustez.
        -> Asegúrate de incluir el CSS proporcionado en tu hoja de estilos principal.
    2.  **Lazy Loading de Imágenes:** Se ha añadido `loading="lazy"` a todas las imágenes que no están en el viewport inicial
        para optimizar la carga.
    3.  **Consistencia de Íconos:** Se ha unificado el uso de `fas fa-long-arrow-alt-right` para los botones de acción
        principal, manteniendo `fas fa-phone-alt` para el botón de contacto por su especificidad.
    4.  **Mensajes de "Contenido No Disponible":** Se han mejorado y unificado los mensajes para cuando no hay datos
        disponibles en el CMS para una sección (e.g., valores, servicios destacados, proyectos).
-->

<!-- CSS necesario para las animaciones "animate-on-scroll" (Colocar en tu archivo CSS principal) -->
<style>
    .animate-on-scroll {
        /* Estado inicial: oculto y ligeramente desplazado hacia abajo */
        opacity: 0;
        transform: translateY(1.5rem); /* Equivalente a translate-y-6 */
        /* Transición para la animación de entrada */
        transition: opacity 700ms ease-out, transform 700ms ease-out;
        will-change: opacity, transform; /* Sugerencia para el navegador para optimizar la animación */
    }

    .animate-on-scroll.is-visible {
        /* Estado final: completamente visible y en su posición original */
        opacity: 1;
        transform: translateY(0);
    }
</style>

<!-- Sección "Quiénes Somos" -->
    {% include 'core/home_sections_quienes.html' %}


<!-- Sección de Servicios Destacados -->
    {% include 'core/home_sections_servicios.html' %}


<!-- Sección de Proyectos Recientes -->
    {% include 'core/home_sections_proyectos.html' %}


<!-- Sección Final CTA -->
    {% include 'core/home_sections_final.html' %}


<!-- SCRIPT DE ANIMACIÓN SCROLL (Refactorizado para usar la clase 'is-visible') -->
<script>
document.addEventListener("DOMContentLoaded", () => {
    const animatedElements = document.querySelectorAll('.animate-on-scroll');

    const observer = new IntersectionObserver((entries, observer) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                // Añadir la clase 'is-visible' para activar la animación definida en CSS
                entry.target.classList.add('is-visible');
                // Dejar de observar el elemento una vez que se ha animado
                observer.unobserve(entry.target);
            }
        });
    }, {
        threshold: 0.15 // El 15% del elemento debe estar visible para activar la animación
    });

    // Iniciar la observación de todos los elementos con la clase 'animate-on-scroll'
    // El estado inicial (oculto y desplazado) es manejado por el CSS.
    animatedElements.forEach(el => {
        observer.observe(el);
    });
});
</script>